{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}
博客详情
{% endblock %}

{% block head %}
{{ super() }}
<style>
	div.post-content {
		margin-left: 0;
		overflow: hidden;
	}
</style>
{% endblock %}

{% block page_content %}
<div class="row">
	<div class="col-md-10">
		<ul class="posts">
			<li class="post">
				<div class="post-content">
					<div class="post-title h3 text-center">
						{{ post.title }}
					</div>
					<div class="post-footer mb10">
						{% if current_user == post.author %}
						<a href="{{ url_for('.edit', id=post.id) }}">
							<span class="label label-info">编辑</span>
						</a>
						{% else %} {# 根据用户名字查找所有的当前用户的文章 #}
						<a href="{{ url_for('.user',username=post.author.username) }}">
							<span class="label label-info">{{ post.author.username }}</span>
						</a>
						{% endif %}
						<a href="{{ url_for('.post', id=post.id) }}#comments">
							<span class="label label-success">评论</span>
						</a>
						<span class="post-date ml10">{{
							post.timestamp.strftime("%Y-%m-%d %H:%M:%S")
						}}</span>
					</div>
					<div class="post-body">
						{% if post.body_html %} {# 表明是安全的html #}
						{{ post.body_html | safe }}
						{% else %}
						{{ post.body }}
						{% endif %}
					</div>
				</div>
			</li>
		</ul>
	</div>
	{% include '_side.html' %}
</div>
{% endblock %}